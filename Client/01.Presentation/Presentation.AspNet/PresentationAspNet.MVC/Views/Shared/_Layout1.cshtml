<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>

    <meta name="description" content="overview &amp; stats" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="~/Images/Favicon.ico" rel="icon" type="image/x-icon" />

    <!--basic styles-->

    <link href="~/Content/assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/assets/css/styleMenu.css" rel="stylesheet" />
    <link href="~/Content/assets/css/blue.css" rel="stylesheet" />
    <link href="~/Content/assets/css/site.css" rel="stylesheet" />
    <link href="~/Content/assets/css/font.css" rel="stylesheet" />
    <link href="~/Content/assets/css/bootstrap-responsive.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/Content/assets/css/font-awesome.min.css" />

    <link rel="stylesheet" href="~/Content/assets/css/chosen.css" />
    <link rel="stylesheet" href="~/Content/assets/css/datepicker.css" />
    <link rel="stylesheet" href="~/Content/assets/css/bootstrap-timepicker.css" />
    <link rel="stylesheet" href="~/Content/assets/css/daterangepicker.css" />
    <link href="~/Content/PagedList.css" rel="stylesheet" />

    <!--fonts-->
    <link href="~/Content/assets/css/GoogleFonts.css" rel="stylesheet" />
    @*<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300" />
    <link href="//fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italic|Open+Sans:400normal|Lato:400normal|Oswald:400normal|Droid+Sans:400normal|PT+Sans:400normal|Source+Sans+Pro:400normal|Ubuntu:400normal|Raleway:400normal|Lobster:400normal|Roboto+Slab:400normal&amp;subset=all" rel="stylesheet" type="text/css"> *@

    <!--ace styles-->
    <link rel="stylesheet" href="~/Content/assets/css/ace.min.css" />
    <link rel="stylesheet" href="~/Content/assets/css/Common.css" />
    <link rel="stylesheet" href="~/Content/assets/css/ace-responsive.min.css" />
    <link href="~/Content/jquery-ui.css" rel="stylesheet" />
    <script type="text/javascript" charset="utf-8" src="@Url.Content("~/Scripts/jquery.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/CommonScript.js")"></script>
    <script src="@Url.Content("~/Scripts/keepAliveSession.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/jquery-1.10.2.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-barcode.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/assets/js/jquery-ui.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/gridviewScroll.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/FileSaver.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.table2excel.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.battatech.excelexport.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.battatech.excelexport.min.js")"></script>
    <link rel="stylesheet" href="~/Content/assets/css/GridviewScroll.css" />
    <script src="@Url.Content("~/Scripts/angular.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/ui-bootstrap-tpls-0.3.0.min.js")" type="text/javascript"></script>
    <style type="text/css">
        .inputClear {
            color: orange;
            cursor: pointer;
            display: none;
            font-size: 15px;
            position: absolute;
            right: 10px;
            top: 8px;
        }

        #alert-bar {
            /*position: fixed;*/
            z-index: 100;
            width: 100%;
            /*top: 50px;
            right: 10px;*/
            display: none;
        }

        #fixed-bar {
            margin: 0;
            padding: 0;
            z-index: 20;
            bottom: 10px;
            left: 50%;
        }

            #fixed-bar a {
                color: white;
                text-decoration: none;
            }

        #bar-inner {
            height: 35px;
            padding: 5px;
        }

        .css-strong {
            font-size: 20px;
        }

        #toTopHover {
            background: url("../../Content/image/dautrang.png");
            display: block;
            float: left;
            width: 40px;
            height: 40px;
        }

        #dialog-process {
            width: 100%;
            height: 1000%;
            filter: alpha(opacity=50);
            opacity: 0.9;
            background: transparent;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 3000;
            display: none;
            background-attachment: fixed;
            background-position: center;
        }

        #modal-form-product {
            z-index: 11;
        }
    </style>
    @*<script src="@Url.Content("~/Scripts/HotKey.js")" type="text/javascript"></script>*@
    <script type="text/javascript">
        @*function StartTime() {
            $.getJSON("@Html.Raw(Url.Action("GetDate", "Home"))", {
            }, function (data) {
                $('#spClock').html(data);
                setTimeout(function () { StartTime(); }, 500);
            });
        }*@
        $(function () {
            //$("html").niceScroll({ cursorcolor: "#FFF", cursoropacitymax: 0 });
            //$(document).bind('contextmenu', function (e) {
            //    e.preventDefault();
            //});
            var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
            if (!isChrome) {
                ShowAlert("", "Hệ thống chỉ thích hợp chạy trên Chrome");
            }
            $("#main-process").click(function () {
                $('#catchFocus').val('');
            });
            $("#fixed-bar")
                .css({ position: 'fixed', bottom: '10px' })
                .hide();
            $(window).scroll(function () {
                if ($(this).scrollTop() > 400) {
                    $('#fixed-bar').fadeIn(600);
                } else {
                    $('#fixed-bar').fadeOut(600);
                }
            });
            $('#go-top').click(function () {
                $('html,body').animate({
                    scrollTop: 0
                }, 600);
                return false;
            });

            //FixNavibar();

            $(".numeric").numeric();
            $(".integer").numeric(false, function () { alert("Integers only"); this.value = ""; this.focus(); });
            $(".positive").numeric({ negative: false }, function () { alert("No negative values"); this.value = ""; this.focus(); });
            $(".positive-integer").numeric({ decimal: false, negative: false }, function () { alert("Positive integers only"); this.value = ""; this.focus(); });
            $("#remove").click(
                function (e) {
                    e.preventDefault();
                    $(".numeric,.integer,.positive").removeNumeric();
                }
            );
        });

        //function FixNavibar() {
        //    var docked = false;
        //    var menu = $('#box-menu');
        //    var init = menu.offset().top;

        //    $(window).scroll(function () {
        //        if (!docked && (menu.offset().top - $(document).scrollTop() < 0)) {
        //            menu.css({ position: "fixed", top: 0, 'z-index': 99, 'width': '90%' });
        //            $('#body-container').css('margin-top', '0px');
        //            docked = true;
        //            $('#box-head').hide();
        //        }
        //        else if (docked && $(document).scrollTop() <= init - $('#box-head').height())
        //        {
        //            menu.css({
        //                position: "absolute",
        //                top: init + 'px',
        //            });
        //            $('#box-head').show();
        //            $('#body-container').css('margin-top','50px');
        //            docked = false;
        //        }
        //    });
        //}

        function LogOff() {
            $.getJSON("/Login/Login/Logoff/", {}, function (data) {
                window.location.href = '/Login/';
            });
        }
        function CauHinhMacDinh() {
            ShowProcess(null, false);
            $('#data').load("@Html.Raw(Url.Action("CauHinhMacDinh", "Home"))", {},
                function () {
                    PopupSearch("CẤU HÌNH MẶC ĐỊNH NGƯỜI DÙNG", 350, true, "LuuCauHinhMacDinh()");
                    CloseProcess();
                });
        }
        function DanhSachKho() {
            ShowProcess(null, false);
            $('#data').load("@Html.Raw(Url.Action("DanhSachKho", "Home"))", {},
                function () {
                    PopupSearch("CHỌN ĐIỂM LÀM VIỆC", 350, true, "ChonDiemGdDaChon()", "search");
                    //$('#btnPop_Save').attr("onclick", "ChonPhongGd()");
                    CloseProcess();
                });
        }


        function ChonDiemGdTheoKho() {
            $('#data').load("@Html.Raw(Url.Action("ChonPhongGd", "Home"))", { idKho: $('#cboChonPhongGd').val() },
                function () {
                    //PopupSearch("CHỌN ĐIỂM LÀM VIỆC", 350, true, "ChonDiemGdDaChon()", "search");
                });
        }

        function ChonDiemGdDaChon() {
            $.getJSON("@Html.Raw(Url.Action("ChonDiemGd", "Home"))", {
                idKho: $('#cboChonPhongGd').val(),
                idDiemGd: $('#cboDiemGD').val()
            }, function (data) {
                PopupSearchCancel();
                if (data == WARNING_SUCCESS) {
                    window.location.href = '/Home';
                }
            });
        }
        function TaiLieuHuongDan(url) {
            var newWindow = window.open(url, "", 'width=900,height=600,top=10,left=10');
            newWindow.focus();
            event.preventDefault();
        }

        function ShowPhimTat() {
            $('#data').load("@Html.Raw(Url.Action("BangPhimTat", "Home"))", {},
                function () {
                    PopupSearch("BẢNG PHÍM TẮT", 500, true, "", "view");
                    $('#btnPop_Save').hide();
                });
        }

        function goHome() {
            window.location.href = '/Home';
        }
    </script>

    <!--inline styles related to this page-->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<body>
    <div style="width: 100%">
        <div style="margin: auto; padding-left: 10px; padding-right: 10px;">
            @Html.Partial("NavigatorHorizontalMenu")
            <div id="alert-bar">
                <div class="span12" style="top: 108px; position: fixed; right: 0px; z-index: 15">
                    <div id="albError" class="alert alert-error" style="display: none;">
                        <strong class="css-strong"><i class="icon-remove" style="padding-right: 5px"></i>Lỗi!</strong>
                        <br />
                        <span id="msgError">Xảy ra lỗi trong quá trình xử lý.</span>

                    </div>

                    <div id="albWarning" class="alert alert-warning" style="display: none;">
                        <strong class="css-strong"><i class="icon-warning" style="padding-right: 5px"></i>Cảnh báo!</strong>
                        <br />
                        <span id="msgWarning">Thông tin yêu cầu xử lý có thể phát sinh lỗi.</span>

                    </div>

                    <div id="albSuccess" class="alert alert-success" style="display: none;">
                        <strong class="css-strong"><i class="icon-ok" style="padding-right: 5px"></i>Ok!</strong>
                        <br />
                        <span id="msgSuccess">Xử lý dữ liệu thành công.</span>

                    </div>

                    <div id="albInfo" class="alert alert-info" style="display: none;">
                        <strong class="css-strong"><i class="icon-info" style="padding-right: 5px"></i>Thông tin!</strong>
                        <br />
                        <span id="msgInfo">Thông tin mở rộng.</span>

                    </div>
                </div>
            </div>
            <div class="row-fluid" id="body-container">
                <div class="span12">
                    <div class="page-content" id="main-process">@RenderBody()</div>
                    <!--/.page-content-->
                </div>
                <!--/.main-content-->
            </div>
        </div>
    </div>
    <!--/.main-container-->

    <!--basic scripts-->

    <!--[if !IE]>-->

    @*<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>*@

    <!--<![endif]-->

    <!--[if IE]>
            <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <![endif]-->

    <!--[if !IE]>-->

    <script type="text/javascript">
        window.jQuery || document.write("<script src='~/Content/assets/js/jquery-2.0.3.min.js'>" + "<" + "/script>");
    </script>

    <!--<![endif]-->

    <!--[if IE]>
            <script type="text/javascript">
                window.jQuery || document.write("<script src='~/Content/assets/js/jquery-1.10.2.min.js'>"+"<"+"/script>");
            </script>
        <![endif]-->

    <script type="text/javascript">
        if ("ontouchend" in document) document.write("<script src='~/Content/assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
    </script>
    <script src="~/Content/assets/js/bootstrap.min.js"></script>

    <!--page specific plugin scripts-->
    <script src="~/Content/assets/js/jquery-ui-1.10.3.custom.min.js"></script>

    <!-- touch events for jquery ui-->
    <script src="~/Content/assets/js/jquery.ui.touch-punch.min.js"></script>
    <!-- js cookie plugin -->
    <script src="~/Content/assets/js/jquery_cookie_min.js"></script>
    <!-- typeahead -->
    <script src="~/Content/assets/js/typeahead.min.js"></script>
    <!-- code prettifier -->
    <script src="~/Content/assets/js/prettify.min.js"></script>
    <!-- sticky messages -->
    <script src="~/Content/assets/js/sticky.min.js"></script>
    <!-- tooltips -->
    <script src="~/Content/assets/js/jquery.qtip.min.js"></script>
    <!-- lightbox -->
    <script src="~/Content/assets/js/jquery.colorbox.min.js"></script>
    <!-- jBreadcrumbs -->
    <script src="~/Content/assets/js/jquery.jBreadCrumb.1.1.min.js"></script>
    <!-- hidden elements width/height -->
    <script src="~/Content/assets/js/jquery.actual.min.js"></script>
    <!-- custom scrollbar -->
    <script src="~/Content/assets/js/jquery.slimscroll.js"></script>
    <!-- fix for ios orientation change -->
    <script src="~/Content/assets/js/ios-orientationchange-fix.js"></script>

    <!-- mobile nav -->
    <script src="~/Content/assets/js/selectNav.js"></script>

    <!-- common functions -->
    <script src="~/Content/assets/js/gebo_common.js"></script>


    <script src="~/Scripts/jquery.validate.js"></script>
    <script src="~/Content/assets/js/chosen.jquery.min.js"></script>
    <script src="~/Content/assets/js/date-time/bootstrap-datepicker.min.js"></script>
    <script src="~/Content/assets/js/date-time/bootstrap-timepicker.min.js"></script>
    <script src="~/Content/assets/js/date-time/moment.min.js"></script>
    <script src="~/Content/assets/js/date-time/daterangepicker.min.js"></script>
    <script src="~/Content/assets/js/jquery.knob.min.js"></script>
    <script src="~/Content/assets/js/jquery.autosize-min.js"></script>
    <script src="~/Content/assets/js/jquery.inputlimiter.1.3.1.min.js"></script>
    <script src="~/Content/assets/js/jquery.maskedinput.min.js"></script>
    <script src="~/Content/assets/js/bootstrap-tag.min.js"></script>

    <script src="~/Scripts/jquery.fileupload.js" type="text/javascript"></script>
    <script src="~/Content/assets/js/jquery.ui.touch-punch.min.js"></script>
    <script src="~/Content/assets/js/jquery.slimscroll.min.js"></script>

    <script src="~/Content/assets/js/markdown.min.js"></script>
    <script src="~/Content/assets/js/bootstrap-markdown.min.js"></script>
    <script src="~/Content/assets/js/jquery.hotkeys.min.js"></script>
    <script src="~/Content/assets/js/bootstrap-wysiwyg.min.js"></script>
    <script src="~/Content/assets/js/bootbox.min.js"></script>

    <script src="~/Content/assets/js/ace-elements.min.js"></script>
    <script src="~/Content/assets/js/ace.min.js"></script>
    <!--ace scripts-->

    <script src="~/Scripts/jquery.numeric.js"></script>
    <script type="text/javascript">
        $(".chzn-select").chosen();

        $(function () {
            $('.editor').ace_wysiwyg({
                toolbar:
                    [
                        { name: 'font', className: 'btn-info btn-mini' },
                        null,
                        { name: 'fontSize', className: 'btn-info btn-mini' },
                        null,
                        { name: 'bold', className: 'btn-info btn-mini' },
                        { name: 'italic', className: 'btn-info btn-mini' },
                        { name: 'strikethrough', className: 'btn-info btn-mini' },
                        { name: 'underline', className: 'btn-info btn-mini' },
                        null,
                        { name: 'createLink', className: 'btn-pink btn-mini' },
                        { name: 'unlink', className: 'btn-pink btn-mini' },
                        null,
                        'foreColor'
                    ],
                'wysiwyg': {}
            }).prev().addClass('wysiwyg-style2');

            // set biến timer
            //var typingTimer;                //timer identifier
            //var doneTypingInterval = 500;  //time in ms, 5 second for example
            $('#file').ace_file_input({
                no_file: 'Chọn file ...',
                btn_choose: 'Chọn',
                btn_change: 'Chọn',
                droppable: false,
                onchange: null,
                thumbnail: false //| true | large
                //whitelist:'gif|png|jpg|jpeg'
                //blacklist:'exe|php'
                //onchange:''
                //
            });
            $('#file_TT').ace_file_input({
                no_file: 'Chọn file ...',
                btn_choose: 'Chọn',
                btn_change: 'Chọn',
                droppable: false,
                onchange: null,
                thumbnail: false //| true | large
                //whitelist:'gif|png|jpg|jpeg'
                //blacklist:'exe|php'
                //onchange:''
                //
            });
            $('#txtDate').daterangepicker().prev().on(ace.click_event, function () {
                $(this).next().focus();
            });
            $('#dateRange').daterangepicker().prev().on(ace.click_event, function () {
                $(this).next().focus();
            });
            $('#Ngay').daterangepicker().prev().on(ace.click_event, function () {
                $(this).next().focus();
            });
            $('.timer').timepicker({
                minuteStep: 1,
                showSeconds: true,
                showMeridian: false
            });
        });

        function ChangInfor() {
            var action = '@Html.Raw(Url.Action("GetInfor", "HeThong", new { module = "Common" }))';
            $('#data').load(action, null, function () {
                PopupSearch("Thay đổi thông tin cá nhân", 450, true, "SaveInforUser();", "normal");
            });
        }

        function SaveInforUser() {
            var loaiChange = $("#hidLoaiLuu").val();
            if (loaiChange == '') {
                loaiChange = "0";
            }
            var obj = {
                UserName: $('.box-changeInfor').find("#txtTenDangNhap").val(),
                FullName: $('.box-changeInfor').find("#txtHoVaTen").val(),
                Email: $('.box-changeInfor').find("#txtEmail").val(),
                NumberPhone: $('.box-changeInfor').find("#txtSoDienThoai").val(),
                Password: $('.box-changeInfor').find("#txtMatKhau").val(),
                NewPass: $('.box-changeInfor').find("#txtMatKhauMoi").val()
            };
            if (loaiChange == "1" && obj.UserName == "") {
                $('.box-changeInfor').find("#txtTenDangNhap").focus();
                ShowAlertInPopup('Tên đăng nhập không thể để trống!');
                return;
            }
            if (loaiChange == "1" && obj.FullName == "") {
                $('.box-changeInfor').find("#txtHoVaTen").focus();
                ShowAlertInPopup('Bạn phải nhập Họ và Tên!');
                return;
            }
            if (loaiChange == "1" && obj.Email == "") {
                $('.box-changeInfor').find("#txtEmail").focus();
                ShowAlertInPopup('Bạn cần nhập địa chỉ Email!');
                return;
            }
            if (loaiChange == "1" && !isValidEmail(obj.Email)) {
                $('.box-changeInfor').find("#txtEmail").focus();
                ShowAlertInPopup('Email không đúng định dạng!');
                return;
            }
            if (loaiChange == "0" && obj.Password == "") {
                $('.box-changeInfor').find("#txtMatKhau").focus();
                ShowAlertInPopup('Bạn phải nhập Mật khẩu!');
                return;
            }
            var repass = $('.box-changeInfor').find("#txtNhapLaiMKMoi").val();
            if (loaiChange == "0" && obj.NewPass == '') {
                $('.box-changeInfor').find("#txtMatKhauMoi").focus();
                ShowAlertInPopup('Bạn chưa nhập mật khẩu mới!');
                return;
            }
            if (loaiChange == "0" && obj.NewPass != repass) {
                $('.box-changeInfor').find("#txtNhapLaiMK").focus();
                ShowAlertInPopup('Mật khẩu chưa khớp!' + obj.NewPass + '-' + re);
                return;
            }
            var actUpd = '@Html.Raw(Url.Action("UpdatePass", "HeThong", new { module = "Common" }))';
            if (loaiChange == "1") {
                actUpd = '@Html.Raw(Url.Action("UpdateInfor", "HeThong", new { module = "Common" }))';
            }
            $.ajax({
                type: "POST",
                url: actUpd,
                data: obj,
                success: function (data) {
                    if (data == "") {
                        ShowAlert('', '', "Cập nhật thành công!");
                        PopupSearchCancel();
                    } else if (data == "NotHas") {
                        ShowAlertInPopup('Mật khẩu cũ không đúng.');
                    } else {
                        ShowAlertInPopup('Cập nhật thông tin bị lỗi.');
                    }
                }
            });
        }
    </script>
    @Html.Partial("CommonPopup")
    @Html.Partial("CommonPopupV2")
    <div id="dialog-process" style="display: none">
        @*<i class="icon-spinner icon-spin orange bigger-200" style="margin-left: 50%; margin-top: 400px;"></i>*@
        <div class="row-fluid" style="margin-left: 50%; margin-top: 300px;">
            <img src="../../Images/loading.gif" alt="loading" />
            @*<i class="icon-spinner icon-spin orange bigger-300"></i>
            <div class="span6">
                <div class="progress" id="processing" data-percent="0%">
                    <div class="bar" id="processingbar" style="width: 0%;"></div>
                </div>
            </div>*@
<!--/span-->
        </div>
    </div>
    <div id="fixed-bar">
        <div id="bar-inner">
            <a id="go-top" href="#" title="back to top">
                <span id="toTopHover" style="opacity: 80;"></span>
            </a>
            <!--&uarr;Back to Top-->
        </div>
    </div>
    <div class="hotro-wrap">
        @Html.Partial("HoTro")
    </div>
</body>
</html>
